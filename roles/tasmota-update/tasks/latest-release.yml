- name: Get latest Tasmota release
  uri:
    url: >-
      https://api.github.com/repos/arendst/Tasmota/releases/latest
    return_content: true
  delegate_to: localhost
  run_once: true
  register: latest_release
  changed_when: false

- name: Determine latest Tasmota release version
  set_fact:
    latest_release_version: >-
      {{ latest_release.json.tag_name | regex_replace('^v', '') }}
  run_once: true
