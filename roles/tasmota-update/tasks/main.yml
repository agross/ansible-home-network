- ansible.builtin.import_tasks: latest-release.yml

- name: Build username and password for API calls
  set_fact:
    tasmota_credentials: >-
      &user={{ tasmota_user | urlencode | replace('/', '%2F') }}&password={{ tasmota_password | urlencode | replace('/', '%2F') }}
  when: tasmota_password is defined and tasmota_password

- ansible.builtin.import_tasks: update-required.yml
- ansible.builtin.import_tasks: upgrade-url.yml
- ansible.builtin.import_tasks: upgrade.yml
