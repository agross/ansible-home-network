- name: Configure DNS
  ansible.builtin.import_tasks: dns.yml

- name: Configure network interfaces
  ansible.builtin.import_tasks: network-interfaces.yml

- name: Configure firewall for the Proxmox host
  ansible.builtin.import_tasks: firewall.yml

- name: Configure ACME account
  ansible.builtin.import_tasks: acme-account.yml

- name: Configure zfs
  when: pve_zfs_enabled | ansible.builtin.bool
  ansible.builtin.import_tasks: zfs.yml

- name: Configure systemd-boot kernel command line
  ansible.builtin.import_tasks: systemd-boot-kernel-cmdline.yml

- name: Install fake subscription such that package update notifications work
  when: pve_remove_subscription_warning | ansible.builtin.bool
  ansible.builtin.import_tasks: subscription.yml

- name: Ensure proxmoxer is available
  ansible.builtin.package:
    name: python3-proxmoxer
    state: present

- name: Create ZFS datasets
  ansible.builtin.import_tasks: create-zfs-datasets.yml

- name: Create LXC guests
  ansible.builtin.import_tasks: create-lxc.yml

- name: Create VM guests
  ansible.builtin.import_tasks: create-vm.yml
