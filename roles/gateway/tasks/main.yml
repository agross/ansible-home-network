- name: Install networkd-dispatcher
  ansible.builtin.import_tasks: networkd-dispatcher.yml

- name: Configure PPPoE
  ansible.builtin.import_tasks: pppoe.yml

- name: Configure ddclient
  ansible.builtin.import_tasks: ddclient.yml

# To debug wireguard:
# echo module wireguard +p > /sys/kernel/debug/dynamic_debug/control
# followed by:
# journalctl -kf
# and
# sudo wg
- name: Ensure wireguard-tools is installed (not needed to function)
  ansible.builtin.package:
    name: wireguard-tools
    state: present

- name: Install speed monitoring script
  ansible.builtin.template:
    src: templates/speed.j2
    dest: /usr/local/bin/speed
    owner: 0
    group: 0
    mode: '755'
