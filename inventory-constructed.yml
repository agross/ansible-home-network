plugin: ansible.builtin.constructed

# Skip instead of producing an error if a variable is not defined.
# strict: false

# Dynamic group assignment based on facts.
#
# To see the list of hosts in a specific groups:
#
# ansible-inventory --list | jq .hypervisor
groups:
  hypervisor: >-
    ansible_virtualization_role == 'host'

  guest: >-
    ansible_virtualization_role == 'guest'

  linux: >-
    ansible_system == 'Linux'

  fedora: >-
    ansible_distribution == 'Fedora'

  raspi: >-
    'raspberrypi-kernel' in packages

  build_agents: >-
    inventory_hostname is match("agent-*")

  gateway: >-
    inventory_hostname is match("gateway-*")
