- name: Import Proxmox configuration playbook
  ansible.builtin.import_playbook: _proxmox.yml
  vars:
    playbook_hosts: ogd:&hypervisor

- name: Import Linux configuration playbook
  ansible.builtin.import_playbook: _linux.yml
  vars:
    playbook_hosts: ogd:&linux

- name: Import Linux configuration playbook
  ansible.builtin.import_playbook: _linux-like.yml
  vars:
    playbook_hosts: ogd:&linux

- name: Import Fedora configuration playbook
  ansible.builtin.import_playbook: _fedora.yml
  vars:
    playbook_hosts: ogd:&fedora

- name: Gateway configuration
  hosts: gateway-ogd
  become: true
  gather_facts: false
  roles:
    - role: ssh
      tags: ssh
    - role: gateway
      tags: gateway

- name: DNS configuration
  hosts: dns-ogd
  become: true
  gather_facts: false
  roles:
    - role: dns-server
      tags: dns-server

- name: Reverse proxy configuration
  hosts: proxy-ogd
  become: true
  gather_facts: false
  roles:
    - role: traefik
      tags: traefik

- name: Hosted services on yard
  hosts: yard
  become: true
  gather_facts: false
  roles:
    - role: samba
      tags: samba

- name: Hosted services on argus
  hosts: argus
  become: true
  gather_facts: false
  roles:
    - role: docker
      tags: docker
    - role: frigate
      tags: frigate

- name: Hosted services
  hosts: finn
  become: true
  gather_facts: false
  roles:
    - role: smartmontools
      tags: smartmontools
    - role: docker
      tags: docker
    - role: mqtt
      tags:
        - mqtt
        - container
    - role: traefik
      tags:
        - traefik
        - container
    - role: iobroker
      tags:
        - iobroker
        - container
    - role: logger
      tags:
        - logger
        - container
    - role: github-runner
      tags: github-runner
    - role: prometheus
      tags: prometheus
